# Cloudflare Pages éƒ¨ç½²é…ç½®æŒ‡å—

## ğŸ“‹ éƒ¨ç½²å‰å‡†å¤‡

### 1. ç¡®ä¿ä»£ç å·²æäº¤åˆ° GitHub

```bash
git add .
git commit -m "feat: å®Œæˆ Phase 1-4 åŠŸèƒ½ + Cloudflare éƒ¨ç½²é…ç½®"
git push origin main
```

### 2. ç™»å½• Cloudflare Dashboard

è®¿é—® https://dash.cloudflare.com å¹¶ç™»å½•

---

## ğŸš€ éƒ¨ç½²æ­¥éª¤

### æ­¥éª¤ 1: åˆ›å»ºæ–°é¡¹ç›®

1. åœ¨ Cloudflare Dashboard ä¸­ï¼Œç‚¹å‡»å·¦ä¾§èœå•çš„ **"Pages"**
2. ç‚¹å‡» **"Create a project"**
3. é€‰æ‹© **"Connect to Git"**
4. æˆæƒ Cloudflare è®¿é—®ä½ çš„ GitHub è´¦æˆ·ï¼ˆå¦‚æœè¿˜æ²¡æˆæƒï¼‰
5. é€‰æ‹©ä½ çš„ä»“åº“ï¼š`Jianan-Huang0609/AISkill-8Personalities`

### æ­¥éª¤ 2: é…ç½®æ„å»ºè®¾ç½®

åœ¨é¡¹ç›®è®¾ç½®é¡µé¢ï¼Œå¡«å†™ä»¥ä¸‹ä¿¡æ¯ï¼š

- **Project name**: `ai-skill-tree-assessment` (æˆ–ä½ å–œæ¬¢çš„åç§°)
- **Production branch**: `main` (æˆ–ä½ çš„ä¸»åˆ†æ”¯)
- **Framework preset**: `Vite`
- **Build command**: `npm run build`
  - âš ï¸ **é‡è¦**: ä½¿ç”¨ `npm run build`ï¼Œå®ƒä¼šè‡ªåŠ¨è¿è¡Œ `prebuild` è„šæœ¬å®‰è£…å¯é€‰ä¾èµ–
- **Build output directory**: `dist`
- **Root directory**: `/` (ç•™ç©ºæˆ–å¡«å†™ `/`)

### æ­¥éª¤ 3: ç¯å¢ƒå˜é‡ï¼ˆå¯é€‰ï¼‰

å¦‚æœéœ€è¦ç¯å¢ƒå˜é‡ï¼Œåœ¨ **"Environment variables"** éƒ¨åˆ†æ·»åŠ ï¼š

- `NODE_ENV`: `production`

### æ­¥éª¤ 4: ä¿å­˜å¹¶éƒ¨ç½²

1. ç‚¹å‡» **"Save and Deploy"**
2. ç­‰å¾…æ„å»ºå®Œæˆï¼ˆé€šå¸¸éœ€è¦ 2-5 åˆ†é’Ÿï¼‰

---

## âœ… éªŒè¯éƒ¨ç½²

### æ£€æŸ¥æ„å»ºæ—¥å¿—

1. åœ¨ Cloudflare Pages Dashboard ä¸­ï¼Œç‚¹å‡»ä½ çš„é¡¹ç›®
2. æŸ¥çœ‹ **"Deployments"** æ ‡ç­¾
3. ç‚¹å‡»æœ€æ–°çš„éƒ¨ç½²ï¼ŒæŸ¥çœ‹æ„å»ºæ—¥å¿—

**åº”è¯¥çœ‹åˆ°**ï¼š
- âœ… `npm ci` æˆåŠŸ
- âœ… `npm install --include=optional` å®‰è£…å¯é€‰ä¾èµ–
- âœ… `npm run build` æ„å»ºæˆåŠŸ
- âœ… æ²¡æœ‰ Rollup æ¨¡å—æ‰¾ä¸åˆ°çš„é”™è¯¯

### è®¿é—®ç½‘ç«™

éƒ¨ç½²æˆåŠŸåï¼Œä½ ä¼šå¾—åˆ°ä¸€ä¸ª Cloudflare Pages URLï¼š
- æ ¼å¼ï¼š`https://your-project-name.pages.dev`
- å¯ä»¥åœ¨é¡¹ç›®è®¾ç½®ä¸­è‡ªå®šä¹‰åŸŸå

---

## ğŸ”§ æ•…éšœæ’é™¤

### é—®é¢˜ 1: Rollup æ¨¡å—æ‰¾ä¸åˆ°

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Error: Cannot find module '@rollup/rollup-linux-x64-gnu'
```

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ `package.json` ä¸­æœ‰ `prebuild` è„šæœ¬ï¼š
   ```json
   "prebuild": "npm install --include=optional --no-save || true"
   ```
2. å¦‚æœè¿˜æ˜¯å¤±è´¥ï¼Œå°†æ„å»ºå‘½ä»¤æ”¹ä¸ºï¼š
   ```
   npm run build:ci
   ```

### é—®é¢˜ 2: æ„å»ºè¶…æ—¶

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. æ£€æŸ¥ `package.json` ä¸­çš„ä¾èµ–æ˜¯å¦è¿‡å¤š
2. è€ƒè™‘ä½¿ç”¨ `.npmrc` æ–‡ä»¶ä¼˜åŒ–å®‰è£…é€Ÿåº¦

### é—®é¢˜ 3: è·¯ç”± 404 é”™è¯¯

**è§£å†³æ–¹æ¡ˆ**ï¼š
1. ç¡®è®¤ `_redirects` æ–‡ä»¶å­˜åœ¨ä¸”å†…å®¹ä¸ºï¼š
   ```
   /*    /index.html   200
   ```
2. åœ¨ Cloudflare Pages è®¾ç½®ä¸­ï¼Œç¡®ä¿ **"Single-page application"** é€‰é¡¹å·²å¯ç”¨

---

## ğŸ“ è‡ªå®šä¹‰åŸŸåï¼ˆå¯é€‰ï¼‰

### æ·»åŠ è‡ªå®šä¹‰åŸŸå

1. åœ¨é¡¹ç›®è®¾ç½®ä¸­ï¼Œç‚¹å‡» **"Custom domains"**
2. ç‚¹å‡» **"Set up a custom domain"**
3. è¾“å…¥ä½ çš„åŸŸåï¼ˆå¦‚ `ai2025.yourdomain.com`ï¼‰
4. æŒ‰ç…§æç¤ºé…ç½® DNS è®°å½•

### DNS é…ç½®

åœ¨åŸŸå DNS è®¾ç½®ä¸­æ·»åŠ ï¼š
- **Type**: `CNAME`
- **Name**: `ai2025` (æˆ–ä½ æƒ³è¦çš„å­åŸŸå)
- **Target**: `your-project-name.pages.dev`

---

## ğŸ”„ è‡ªåŠ¨éƒ¨ç½²

Cloudflare Pages é»˜è®¤ä¼šåœ¨ä»¥ä¸‹æƒ…å†µè‡ªåŠ¨éƒ¨ç½²ï¼š

1. âœ… æ¨é€åˆ° `main` åˆ†æ”¯ï¼ˆç”Ÿäº§ç¯å¢ƒï¼‰
2. âœ… åˆ›å»º Pull Requestï¼ˆé¢„è§ˆç¯å¢ƒï¼‰
3. âœ… æ‰‹åŠ¨è§¦å‘éƒ¨ç½²

### æ‰‹åŠ¨è§¦å‘éƒ¨ç½²

1. åœ¨é¡¹ç›®é¡µé¢ï¼Œç‚¹å‡» **"Deployments"**
2. ç‚¹å‡» **"Retry deployment"** æˆ– **"Create deployment"**

---

## ğŸ“Š æ€§èƒ½ä¼˜åŒ–

### 1. å¯ç”¨ Cloudflare CDN

Cloudflare Pages è‡ªåŠ¨ä½¿ç”¨å…¨çƒ CDNï¼Œæ— éœ€é¢å¤–é…ç½®ã€‚

### 2. ç¼“å­˜ç­–ç•¥

é™æ€èµ„æºä¼šè‡ªåŠ¨ç¼“å­˜ï¼ŒHTML æ–‡ä»¶ä½¿ç”¨é€‚å½“çš„ç¼“å­˜å¤´ã€‚

### 3. å‹ç¼©

Cloudflare è‡ªåŠ¨å¯ç”¨ Brotli å’Œ Gzip å‹ç¼©ã€‚

---

## ğŸ¯ å›½å†…è®¿é—®ä¼˜åŒ–

### ä½¿ç”¨ Cloudflare çš„ä¼˜åŠ¿

1. âœ… **å…¨çƒ CDN**: å›½å†…ç”¨æˆ·å¯ä»¥ä»æœ€è¿‘çš„èŠ‚ç‚¹è®¿é—®
2. âœ… **å…è´¹ SSL**: è‡ªåŠ¨ HTTPS
3. âœ… **DDoS é˜²æŠ¤**: è‡ªåŠ¨é˜²æŠ¤
4. âœ… **æ— éœ€å¤‡æ¡ˆ**: ä½¿ç”¨ `.pages.dev` åŸŸåæ— éœ€å¤‡æ¡ˆ

### å¦‚æœå›½å†…è®¿é—®ä»ç„¶æ…¢

1. è€ƒè™‘ä½¿ç”¨å›½å†… CDNï¼ˆå¦‚é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ï¼‰
2. æˆ–ä½¿ç”¨ Cloudflare Workers è¿›è¡Œè¾¹ç¼˜è®¡ç®—ä¼˜åŒ–

---

## ğŸ“š ç›¸å…³èµ„æº

- [Cloudflare Pages æ–‡æ¡£](https://developers.cloudflare.com/pages/)
- [Vite éƒ¨ç½²æŒ‡å—](https://vitejs.dev/guide/static-deploy.html)
- [é¡¹ç›®æ„å»ºä¿®å¤æ–‡æ¡£](./CLOUDFLARE_BUILD_FIX.md)

---

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

- [ ] ä»£ç å·²æäº¤åˆ° GitHub
- [ ] Cloudflare Pages é¡¹ç›®å·²åˆ›å»º
- [ ] æ„å»ºå‘½ä»¤è®¾ç½®ä¸º `npm run build`
- [ ] æ„å»ºè¾“å‡ºç›®å½•è®¾ç½®ä¸º `dist`
- [ ] æ„å»ºæˆåŠŸå®Œæˆ
- [ ] ç½‘ç«™å¯ä»¥æ­£å¸¸è®¿é—®
- [ ] è·¯ç”±æ­£å¸¸å·¥ä½œï¼ˆSPA è·¯ç”±ï¼‰
- [ ] è‡ªå®šä¹‰åŸŸåå·²é…ç½®ï¼ˆå¦‚éœ€è¦ï¼‰

---

**éƒ¨ç½²å®Œæˆåï¼Œä½ çš„ç½‘ç«™åº”è¯¥å¯ä»¥åœ¨å›½å†…æ­£å¸¸è®¿é—®äº†ï¼** ğŸ‰

